
    <!-- <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/main.min.css" rel="stylesheet" /> -->
    <link rel="stylesheet" href="/css/custom.css">
    <style>

.container-fluid { padding: 20px; }
.card-sales {
    border: 1px solid #dee2e6;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    background-color: #ffffff;
    margin-bottom: 20px;
    transition: transform 0.2s, box-shadow 0.2s;
}
.card-sales:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}
.card-header-sales {
    background-color: #ffffff;
    border-bottom: 1px solid #dee2e6;
    border-radius: 8px 8px 0 0;
    padding: 15px 20px;
}
.card-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: #333;
    margin: 0;
}
.card-body-sales {
    padding: 15px 20px;
    min-height: 100px;
}
#calendar {
    border: 1px solid #dee2e6;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    background-color: #ffffff;
    padding: 10px;
}
.fc .fc-button {
    background-color: #007bff;
    border-color: #007bff;
    padding: 6px 12px;
    font-size: 14px;
}
.fc .fc-button:hover {
    background-color: #0056b3;
    border-color: #0056b3;
}
.fc-daygrid-day-number { font-weight: bold; color: #333; }
.external-event {
    padding: 5px 10px;
    margin: 5px 0;
    cursor: pointer;
    color: white;
    border-radius: 4px;
    display: block;
    transition: transform 0.2s;
    width: 100%;
    text-align: center;
}
.external-event:hover { transform: scale(1.02); }
#external-events {
    max-height: 300px;
    overflow-y: auto;
    padding: 10px;
}
.color-option {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    cursor: pointer;
    margin-right: 5px;
    border: 2px solid #fff;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}
.color-option.active { border-color: #007bff; }
#addEvent {
    background-color: #007bff;
    color: #fff;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    transition: background-color 0.3s;
}
#addEvent:hover { background-color: #0056b3; }
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
}
.modal-content {
    background-color: #fff;
    margin: 15% auto;
    padding: 20px;
    border-radius: 8px;
    width: 80%;
    max-width: 400px;
    text-align: center;
}
.btn {
    padding: 8px 16px;
    margin: 5px;
    border-radius: 4px;
    cursor: pointer;
}
.btn-primary { background-color: #007bff; color: #fff; border: none; }
.btn-danger { background-color: #dc3545; color: #fff; border: none; }
.btn:hover { opacity: 0.9; }
@media (max-width: 768px) {
    .card-sales, #calendar { margin: 10px 0; }
    .col-md-3, .col-md-9 { flex: 0 0 100%; max-width: 100%; }
    .card-body-sales { min-height: 80px; }
    .card-title { font-size: 1rem; }
}
@media (max-width: 576px) {
    .card-header-sales, .card-body-sales { padding: 10px 15px; }
    .card-body-sales, .fc-daygrid-day-number { font-size: 0.9rem; }
}


    </style>

<main class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3">
                <!-- "할일(드래그 하세요)" 영역 주석 처리 -->
                <!--
                <div class="card card-sales">
                    <div class="card-header card-header-sales">
                        <h5 class="card-title">할 일(드래그 하세요)</h5>
                    </div>
                    <div class="card-body card-body-sales">
                        <div id="external-events" class="list-group">
                            <div class="external-event list-group-item" data-color="#00ff00">Lunch</div>
                            <div class="external-event list-group-item" data-color="#ffff00">Go home</div>
                            <div class="external-event list-group-item" data-color="#0000ff">Do homework</div>
                            <div class="external-event list-group-item" data-color="#ff0000">Work on UI design</div>
                            <div class="external-event list-group-item" data-color="#ff00ff">Sleep tight</div>
                        </div>
                        <div class="form-check mt-2 p-3">
                            <input type="checkbox" class="form-check-input" id="removeAfterDrop">
                            <label class="form-check-label" for="removeAfterDrop">Remove after drop</label>
                        </div>
                    </div>
                </div>
                -->
                <div class="card card-sales">
                    <div class="card-header card-header-sales">
                        <i class="fas fa-palette"></i> 1.색깔 선택 
                                <i class="fas fa-pen"></i> 2.할일 입력 
                                <i class="fas fa-plus"></i> 3.add 클릭
                    </div>
                    <div class="card-body card-body-sales">
                        <div class="event-form">
                            <div class="mb-3">
                                <div class="d-flex align-items-center mb-2 flex-wrap">
                                    <div class="color-option" style="background-color: #0000ff;" data-color="#0000ff"></div>
                                    <div class="color-option" style="background-color: #ffff00;" data-color="#ffff00"></div>
                                    <div class="color-option" style="background-color: #00ff00;" data-color="#00ff00"></div>
                                    <div class="color-option" style="background-color: #ff0000;" data-color="#ff0000"></div>
                                    <div class="color-option" style="background-color: #ff00ff;" data-color="#ff00ff"></div>
                                    <div class="color-option" style="background-color: #00ffff;" data-color="#00ffff"></div>
                                    <div class="color-option" style="background-color: #800080;" data-color="#800080"></div>
                                    <div class="color-option" style="background-color: #ffa500;" data-color="#ffa500"></div>
                                    <div class="color-option" style="background-color: #808080;" data-color="#808080"></div>
                                    <div class="color-option" style="background-color: #008080;" data-color="#008080"></div>
                                </div>
                            </div>
                            <div class="input-group">
                                <input id="eventTitle" type="text" class="form-control" placeholder="Event Title">
                                <button id="addEvent" type="button" class="btn btn-primary">Add</button>
                            </div>
                   
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-9">
                <div id="calendar"></div>
            </div>
        </div>
    </div>

    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <h5>일정 삭제</h5>
            <p>이 일정을 삭제하시겠습니까?</p>
            <button id="confirmDelete" class="btn btn-danger">삭제</button>
            <button id="cancelDelete" class="btn btn-primary">취소</button>
        </div>
    </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            locale: 'en',
            editable: true,
            droppable: true,
            events: '/calendar/events',
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay'
            },
            buttonText: {
                today: '오늘',
                month: '월간',
                week: '주간',
                day: '일간'
            },
            // 드래그 기능 주석 처리
            /*
            drop: function (info) {
                var color = info.draggedEl.dataset.color || '#3788d8';
                var title = info.draggedEl.innerText;

                console.log('Drop event:', { title, start: info.dateStr, all_day: true, background_color: color });

                fetch('/calendar/events', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        title: title,
                        start: info.dateStr,
                        all_day: true,
                        background_color: color
                    })
                }).then(response => response.json()).then(data => {
                    calendar.addEvent(data);
                }).catch(err => console.error('Drop error:', err));

                if (document.getElementById('removeAfterDrop').checked) {
                    info.draggedEl.remove();
                }
            },
            */
            eventDrop: function (info) {
                console.log('Event dropped:', {
                    id: info.event.id,
                    start: info.event.startStr,
                    end: info.event.end ? info.event.endStr : null,
                    allDay: info.event.allDay
                });

                fetch(`/calendar/events/${info.event.id}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        start: info.event.startStr,
                        end: info.event.end ? info.event.endStr : null,
                        all_day: info.event.allDay
                    })
                }).then(response => response.json()).then(data => {
                    info.event.remove();
                    calendar.addEvent(data);
                }).catch(err => {
                    console.error('Event update error:', err);
                    info.revert();
                });
            },
            eventResize: function (info) {
                console.log('Event resized:', {
                    id: info.event.id,
                    start: info.event.startStr,
                    end: info.event.end ? info.event.endStr : null,
                    allDay: info.event.allDay
                });

                fetch(`/calendar/events/${info.event.id}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        start: info.event.startStr,
                        end: info.event.end ? info.event.endStr : null,
                        all_day: info.event.allDay
                    })
                }).then(response => response.json()).then(data => {
                    info.event.remove();
                    calendar.addEvent(data);
                }).catch(err => {
                    console.error('Event resize error:', err);
                    info.revert();
                });
            },
            eventClick: function (info) {
                var modal = document.getElementById('deleteModal');
                modal.style.display = 'block';

                document.getElementById('confirmDelete').onclick = function () {
                    fetch(`/calendar/events/${info.event.id}`, {
                        method: 'DELETE'
                    }).then(() => {
                        info.event.remove();
                        modal.style.display = 'none';
                    });
                };
                document.getElementById('cancelDelete').onclick = function () {
                    modal.style.display = 'none';
                };
            }
        });
        calendar.render();

        // Draggable 관련 코드 주석 처리
        /*
        var containerEl = document.getElementById('external-events');
        new FullCalendar.Draggable(containerEl, {
            itemSelector: '.external-event',
            eventData: function (eventEl) {
                return {
                    title: eventEl.innerText,
                    backgroundColor: eventEl.dataset.color,
                    borderColor: eventEl.dataset.color,
                    create: true,
                    allDay: true
                };
            }
        });

        document.querySelectorAll('.external-event').forEach(function (eventEl) {
            var color = eventEl.dataset.color || '#3788d8';
            eventEl.style.backgroundColor = color;
            eventEl.style.borderColor = color;
        });
        */

        var colorOptions = document.querySelectorAll('.color-option');
        var addButton = document.getElementById('addEvent');
        var selectedColor = '#0000ff';
        colorOptions[0].classList.add('active');

        colorOptions.forEach(function (option) {
            option.addEventListener('click', function () {
                colorOptions.forEach(opt => opt.classList.remove('active'));
                this.classList.add('active');
                selectedColor = this.dataset.color;
                addButton.style.backgroundColor = selectedColor;
                addButton.style.borderColor = selectedColor;
            });
        });

        document.getElementById('addEvent').addEventListener('click', function () {
            var title = document.getElementById('eventTitle').value;
            if (title) {
                var today = new Date().toISOString().split('T')[0];
                console.log('Add event:', { title, start: today, all_day: true, background_color: selectedColor });

                fetch('/calendar/events', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        title: title,
                        start: today,
                        all_day: true,
                        background_color: selectedColor
                    })
                }).then(response => response.json()).then(data => {
                    calendar.addEvent(data);
                }).catch(err => console.error('Add error:', err));

                document.getElementById('eventTitle').value = '';
            } else {
                alert('이벤트 제목을 입력하세요.');
            }
        });
    });
</script>